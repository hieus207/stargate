(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3299],{76002:function(e){"use strict";var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==n},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a(Array.isArray(e)?[]:{},e,t):e}function o(e,t,n){return e.concat(t).map(function(e){return i(e,n)})}function r(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function s(e,t){try{return t in e}catch(e){return!1}}function a(e,n,l){(l=l||{}).arrayMerge=l.arrayMerge||o,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=i;var c,d,u=Array.isArray(n);return u!==Array.isArray(e)?i(n,l):u?l.arrayMerge(e,n,l):(d={},(c=l).isMergeableObject(e)&&r(e).forEach(function(t){d[t]=i(e[t],c)}),r(n).forEach(function(t){(!s(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(s(e,t)&&c.isMergeableObject(n[t])?d[t]=(function(e,t){if(!t.customMerge)return a;var n=t.customMerge(e);return"function"==typeof n?n:a})(t,c)(e[t],n[t],c):d[t]=i(n[t],c))}),d)}a.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,n){return a(e,n,t)},{})},e.exports=a},74462:function(e,t,n){var i,o=n(66396).Buffer;i=function(){"use strict";var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw TypeError("expected string");var t,n=unescape(encodeURIComponent(e)),i=new Uint8Array(n.length);for(t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i},e.encodeUTF8=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},"undefined"==typeof atob?void 0!==o.from?(e.encodeBase64=function(e){return o.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(o.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new o(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new o(e,"base64"),0))}):(e.encodeBase64=function(e){var t,n=[],i=e.length;for(t=0;t<i;t++)n.push(String.fromCharCode(e[t]));return btoa(n.join(""))},e.decodeBase64=function(e){t(e);var n,i=atob(e),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o}),e},e.exports?e.exports=i():(this.nacl||(this.nacl={}),this.nacl.util=i())},93022:function(e,t,n){var i;!function(o,r){"use strict";var s="function",a="undefined",l="object",c="string",d="major",u="model",h="name",p="type",g="vendor",w="version",b="architecture",f="console",m="mobile",v="tablet",y="smarttv",S="wearable",_="embedded",R="Amazon",E="Apple",O="ASUS",k="BlackBerry",C="Browser",T="Chrome",x="Firefox",N="Google",P="Huawei",j="Microsoft",U="Motorola",A="Opera",W="Samsung",L="Sharp",I="Sony",D="Xiaomi",M="Zebra",q="Facebook",K="Chromium OS",B="Mac OS",G=" Browser",$=function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},F=function(e,t){return typeof e===c&&-1!==z(t).indexOf(z(e))},z=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},J=function(e,t){for(var n,i,o,a,c,d,u=0;u<t.length&&!c;){var h=t[u],p=t[u+1];for(n=i=0;n<h.length&&!c&&h[n];)if(c=h[n++].exec(e))for(o=0;o<p.length;o++)d=c[++i],typeof(a=p[o])===l&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,d):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=d?d.replace(a[1],a[2]):void 0:this[a[0]]=d?a[1].call(this,d,a[2]):void 0:4===a.length&&(this[a[0]]=d?a[3].call(this,d.replace(a[1],a[2])):void 0):this[a]=d||r;u+=2}},X=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(F(t[n][i],e))return"?"===n?r:n}else if(F(t[n],e))return"?"===n?r:n;return t.hasOwnProperty("*")?t["*"]:e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,w],[/opios[\/ ]+([\w\.]+)/i],[w,[h,A+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[w,[h,A+" GX"]],[/\bopr\/([\w\.]+)/i],[w,[h,A]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[w,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[w,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,w],[/quark(?:pc)?\/([-\w\.]+)/i],[w,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[w,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[h,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[w,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[w,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[w,[h,"Smart Lenovo "+C]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+C],w],[/\bfocus\/([\w\.]+)/i],[w,[h,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[h,A+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[h,A+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[h,"MIUI"+G]],[/fxios\/([\w\.-]+)/i],[w,[h,x]],[/\bqihoobrowser\/?([\w\.]*)/i],[w,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],w],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+G],w],[/samsungbrowser\/([\w\.]+)/i],[w,[h,W+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[w,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,w],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[w,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,q],w],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[w,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[h,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,T+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[h,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,w],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[w,X,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],w],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[h,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[w,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[w,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,z]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,"",z]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[g,W],[p,v]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[g,W],[p,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[g,E],[p,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[g,E],[p,v]],[/(macintosh);/i],[u,[g,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[g,L],[p,m]],[/(?:honor)([-\w ]+)[;\)]/i],[u,[g,"Honor"],[p,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[g,P],[p,v]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[g,P],[p,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[g,D],[p,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[g,D],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[g,"OPPO"],[p,m]],[/\b(opd2\d{3}a?) bui/i],[u,[g,"OPPO"],[p,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[g,"Vivo"],[p,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[g,"Realme"],[p,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[g,U],[p,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[g,U],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[g,"LG"],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[g,"LG"],[p,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[g,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[g,"Nokia"],[p,m]],[/(pixel c)\b/i],[u,[g,N],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[g,N],[p,m]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[g,I],[p,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[g,I],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[g,"OnePlus"],[p,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[g,R],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[g,R],[p,m]],[/(playbook);[-\w\),; ]+(rim)/i],[u,g,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[g,k],[p,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[g,O],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[g,O],[p,m]],[/(nexus 9)/i],[u,[g,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[u,/_/g," "],[p,m]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[g,"TCL"],[p,v]],[/(itel) ((\w+))/i],[[g,z],u,[p,X,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[g,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[g,"Meizu"],[p,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[g,"Ulefone"],[p,m]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[u,[g,"Energizer"],[p,m]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[u,[g,"Cat"],[p,m]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[u,[g,"Smartfren"],[p,m]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[g,"Nothing"],[p,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,u,[p,m]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,u,[p,v]],[/(surface duo)/i],[u,[g,j],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[g,"Fairphone"],[p,m]],[/(u304aa)/i],[u,[g,"AT&T"],[p,m]],[/\bsie-(\w*)/i],[u,[g,"Siemens"],[p,m]],[/\b(rct\w+) b/i],[u,[g,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[u,[g,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[u,[g,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[g,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[u,[g,"NuVision"],[p,v]],[/\b(k88) b/i],[u,[g,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[u,[g,"ZTE"],[p,m]],[/\b(gen\d{3}) b.+49h/i],[u,[g,"Swiss"],[p,m]],[/\b(zur\d{3}) b/i],[u,[g,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[u,[g,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],u,[p,v]],[/\b(ns-?\w{0,9}) b/i],[u,[g,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[g,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],u,[p,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],u,[p,m]],[/\b(ph-1) /i],[u,[g,"Essential"],[p,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[g,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[u,[g,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[u,[g,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[u,[g,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[g,u,[p,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[g,j],[p,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[g,M],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[g,M],[p,m]],[/smart-tv.+(samsung)/i],[g,[p,y]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[g,W],[p,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,"LG"],[p,y]],[/(apple) ?tv/i],[g,[u,E+" TV"],[p,y]],[/crkey/i],[[u,T+"cast"],[g,N],[p,y]],[/droid.+aft(\w+)( bui|\))/i],[u,[g,R],[p,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[g,L],[p,y]],[/(bravia[\w ]+)( bui|\))/i],[u,[g,I],[p,y]],[/(mitv-\w{5}) bui/i],[u,[g,D],[p,y]],[/Hbbtv.*(technisat) (.*);/i],[g,u,[p,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,V],[u,V],[p,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,u,[p,f]],[/droid.+; (shield) bui/i],[u,[g,"Nvidia"],[p,f]],[/(playstation [345portablevi]+)/i],[u,[g,I],[p,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[g,j],[p,f]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[g,W],[p,S]],[/((pebble))app/i],[g,u,[p,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[g,E],[p,S]],[/droid.+; (glass) \d/i],[u,[g,N],[p,S]],[/droid.+; (wt63?0{2,3})\)/i],[u,[g,M],[p,S]],[/droid.+; (glass) \d/i],[u,[g,N],[p,S]],[/(pico) (4|neo3(?: link|pro)?)/i],[g,u,[p,S]],[/; (quest( \d| pro)?)/i],[u,[g,q],[p,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[p,_]],[/(aeobc)\b/i],[u,[g,R],[p,_]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[p,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,m]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[h,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[h,w],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,w],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[w,X,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[w,X,Q],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,B],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,w],[/\(bb(10);/i],[w,[h,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[h,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[w,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[w,[h,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,K],w],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,w],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,w]]},Y=function(e,t){if(typeof e===l&&(t=e,e=r),!(this instanceof Y))return new Y(e,t).getResult();var n=typeof o!==a&&o.navigator?o.navigator:r,i=e||(n&&n.userAgent?n.userAgent:""),f=n&&n.userAgentData?n.userAgentData:r,y=t?$(Z,t):Z,S=n&&n.userAgent==i;return this.getBrowser=function(){var e,t={};return t[h]=r,t[w]=r,J.call(t,i,y.browser),t[d]=typeof(e=t[w])===c?e.replace(/[^\d\.]/g,"").split(".")[0]:r,S&&n&&n.brave&&typeof n.brave.isBrave==s&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[b]=r,J.call(e,i,y.cpu),e},this.getDevice=function(){var e={};return e[g]=r,e[u]=r,e[p]=r,J.call(e,i,y.device),S&&!e[p]&&f&&f.mobile&&(e[p]=m),S&&"Macintosh"==e[u]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[u]="iPad",e[p]=v),e},this.getEngine=function(){var e={};return e[h]=r,e[w]=r,J.call(e,i,y.engine),e},this.getOS=function(){var e={};return e[h]=r,e[w]=r,J.call(e,i,y.os),S&&!e[h]&&f&&f.platform&&"Unknown"!=f.platform&&(e[h]=f.platform.replace(/chrome os/i,K).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===c&&e.length>500?V(e,500):e,this},this.setUA(i),this};Y.VERSION="1.0.40",Y.BROWSER=H([h,w,d]),Y.CPU=H([b]),Y.DEVICE=H([u,g,p,f,m,y,v,S,_]),Y.ENGINE=Y.OS=H([h,w]),typeof t!==a?(e.exports&&(t=e.exports=Y),t.UAParser=Y):n.amdO?r!==(i=(function(){return Y}).call(t,n,t,e))&&(e.exports=i):typeof o!==a&&(o.UAParser=Y);var ee=typeof o!==a&&(o.jQuery||o.Zepto);if(ee&&!ee.ua){var et=new Y;ee.ua=et.getResult(),ee.ua.get=function(){return et.getUA()},ee.ua.set=function(e){et.setUA(e);var t=et.getResult();for(var n in t)ee.ua[n]=t[n]}}}("object"==typeof window?window:this)},45254:function(e,t){var n;!function(){"use strict";var i={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=r(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=r(t,n));return t}(n)))}return e}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0!==(n=(function(){return o}).apply(t,[]))&&(e.exports=n)}()},9515:function(e,t,n){"use strict";n.d(t,{Rh:function(){return eN},sX:function(){return g},PS:function(){return ej},_Y:function(){return E},Yz:function(){return ey},D:function(){return eS},NO:function(){return eR},e6:function(){return eE},gW:function(){return e_},DW:function(){return ev},_6:function(){return ex},x6:function(){return ew},Ls:function(){return eb},PT:function(){return ek},h1:function(){return eC},Ey:function(){return eT},_H:function(){return ef},Ob:function(){return V},dg:function(){return z},eo:function(){return ed},rM:function(){return ec},Lh:function(){return eu},mb:function(){return eU}});var i,o,r,s,a,l,c,d,u,h,p,g,w=n(74462),b=n(81352);n(68571),(i=c||(c={}))[i.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",i[i.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",i[i.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",i[i.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",i[i.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",i[i.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",i[i.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(o=d||(d={}))[o.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",o[o.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(r=u||(u={}))[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(s=h||(h={}))[s.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",s[s.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",s[s.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",s[s.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",s[s.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(a=p||(p={}))[a.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",a[a.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",a[a.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",a[a.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(l=g||(g={})).MAINNET="-239",l.TESTNET="-3";let f=function(e,t=!1){let n;return e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=JSON.stringify(e)),n=w.decodeUTF8(e)),function(e,t){let n=w.encodeBase64(e);return t?encodeURIComponent(n):n}(n,t)},m=function(e,t=!1){var n;let i=(n=e,t&&(n=decodeURIComponent(n)),w.decodeBase64(n));return{toString:()=>w.encodeUTF8(i),toObject(){try{return JSON.parse(w.encodeUTF8(i))}catch(e){return null}},toUint8Array:()=>i}};function v(e){let t="";return e.forEach(e=>{t+=("0"+(255&e).toString(16)).slice(-2)}),t}function y(e){if(e.length%2!=0)throw Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t}class S{constructor(e){this.nonceLength=24,this.keyPair=e?this.createKeypairFromString(e):this.createKeypair(),this.sessionId=v(this.keyPair.publicKey)}createKeypair(){return b.box.keyPair()}createKeypairFromString(e){return{publicKey:y(e.publicKey),secretKey:y(e.secretKey)}}createNonce(){return b.randomBytes(this.nonceLength)}encrypt(e,t){let n=new TextEncoder().encode(e),i=this.createNonce(),o=b.box(n,i,t,this.keyPair.secretKey);return function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(i,o)}decrypt(e,t){let[n,i]=function(e,t){if(t>=e.length)throw Error("Index is out of buffer");return[e.slice(0,t),e.slice(t)]}(e,this.nonceLength),o=b.box.open(i,n,t,this.keyPair.secretKey);if(!o)throw Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${t.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(o)}stringifyKeypair(){return{publicKey:v(this.keyPair.publicKey),secretKey:v(this.keyPair.secretKey)}}}var _=n(68571);function R(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})}class E extends Error{constructor(e,t){super(e,t),this.message=`${E.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${e?"\n"+e:""}`,Object.setPrototypeOf(this,E.prototype)}get info(){return""}}E.prefix="[TON_CONNECT_SDK_ERROR]";class O extends E{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,O.prototype)}}class k extends E{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,k.prototype)}}class C extends E{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,C.prototype)}}class T extends E{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...e){super(...e),Object.setPrototypeOf(this,T.prototype)}}class x extends E{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,x.prototype)}}class N extends E{get info(){return"User rejects the action in the wallet."}constructor(...e){super(...e),Object.setPrototypeOf(this,N.prototype)}}class P extends E{get info(){return"Request to the wallet contains errors."}constructor(...e){super(...e),Object.setPrototypeOf(this,P.prototype)}}class j extends E{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,j.prototype)}}class U extends E{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...e){super(...e),Object.setPrototypeOf(this,U.prototype)}}class A extends E{get info(){return"An error occurred while fetching the wallets list."}constructor(...e){super(...e),Object.setPrototypeOf(this,A.prototype)}}class W extends E{get info(){return"Passed address is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,W.prototype)}}class L extends E{get info(){return"Passed hex is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,L.prototype)}}class I extends E{constructor(...e){super(...e),Object.setPrototypeOf(this,I.prototype)}}let D={[c.UNKNOWN_ERROR]:I,[c.USER_REJECTS_ERROR]:N,[c.BAD_REQUEST_ERROR]:P,[c.UNKNOWN_APP_ERROR]:j,[c.MANIFEST_NOT_FOUND_ERROR]:C,[c.MANIFEST_CONTENT_ERROR]:k};class M{parseError(e){let t=I;return e.code in D&&(t=D[e.code]||I),new t(e.message)}}let q=new M;class K{isError(e){return"error"in e}}let B={[u.UNKNOWN_ERROR]:I,[u.USER_REJECTS_ERROR]:N,[u.BAD_REQUEST_ERROR]:P,[u.UNKNOWN_APP_ERROR]:j};class G extends K{convertToRpcRequest(e){return{method:"sendTransaction",params:[JSON.stringify(e)]}}parseAndThrowError(e){let t=I;throw e.error.code in B&&(t=B[e.error.code]||I),new t(e.error.message)}convertFromRpcResponse(e){return{boc:e.result}}}let $=new G;class H{constructor(e,t){this.storage=e,this.storeKey="ton-connect-storage_http-bridge-gateway::"+t}storeLastEventId(e){return R(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,e)})}removeLastEventId(){return R(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return R(this,void 0,void 0,function*(){return(yield this.storage.getItem(this.storeKey))||null})}}function F(e,t){return("/"===e.slice(-1)?e.slice(0,-1):e)+"/"+t}function z(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname}function V(e){return e.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--")}function J(e,t){return R(this,void 0,void 0,function*(){return new Promise((n,i)=>{var o,r;if(null===(o=null==t?void 0:t.signal)||void 0===o?void 0:o.aborted){i(new E("Delay aborted"));return}let s=setTimeout(()=>n(),e);null===(r=null==t?void 0:t.signal)||void 0===r||r.addEventListener("abort",()=>{clearTimeout(s),i(new E("Delay aborted"))})})})}function X(e){let t=new AbortController;return(null==e?void 0:e.aborted)?t.abort():null==e||e.addEventListener("abort",()=>t.abort(),{once:!0}),t}function Q(e,t){var n,i;return R(this,void 0,void 0,function*(){let o;let r=null!==(n=null==t?void 0:t.attempts)&&void 0!==n?n:10,s=null!==(i=null==t?void 0:t.delayMs)&&void 0!==i?i:200,a=X(null==t?void 0:t.signal);if("function"!=typeof e)throw new E(`Expected a function, got ${typeof e}`);let l=0;for(;l<r;){if(a.signal.aborted)throw new E(`Aborted after attempts ${l}`);try{return yield e({signal:a.signal})}catch(e){o=e,++l<r&&(yield J(s))}}throw o})}function Z(...e){try{console.debug("[TON_CONNECT_SDK]",...e)}catch(e){}}function Y(...e){try{console.error("[TON_CONNECT_SDK]",...e)}catch(e){}}class ee{constructor(e,t,n,i,o){this.bridgeUrl=t,this.sessionId=n,this.listener=i,this.errorsListener=o,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=2e3,this.defaultResendDelay=5e3,this.eventSource=function(e,t){let n=null,i=null,o=null,r=null,s=null,a=(a,...l)=>R(this,void 0,void 0,function*(){if(r=null!=a?a:null,null==s||s.abort(),(s=X(a)).signal.aborted)throw new E("Resource creation was aborted");i=null!=l?l:null;let c=e(s.signal,...l);o=c;let d=yield c;if(o!==c&&d!==n)throw yield t(d),new E("Resource creation was aborted by a new resource creation");return n=d});return{create:a,current:()=>null!=n?n:null,dispose:()=>R(this,void 0,void 0,function*(){try{let e=n;n=null;let i=o;o=null;try{null==s||s.abort()}catch(e){}yield Promise.allSettled([e?t(e):Promise.resolve(),i?t((yield i)):Promise.resolve()])}catch(e){}}),recreate:e=>R(this,void 0,void 0,function*(){let t=n,s=o,l=i,c=r;if(yield J(e),t===n&&s===o&&l===i&&c===r)return yield a(r,...null!=l?l:[]);throw new E("Resource recreation was aborted by a new resource creation")})}}((e,t)=>R(this,void 0,void 0,function*(){let n={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:e,openingDeadlineMS:t};return yield function(e){return R(this,void 0,void 0,function*(){return yield function(e,t){let n=null==t?void 0:t.timeout,i=X(null==t?void 0:t.signal);return new Promise((t,o)=>R(this,void 0,void 0,function*(){let r;if(i.signal.aborted){o(new E("Operation aborted"));return}void 0!==n&&(r=setTimeout(()=>{i.abort(),o(new E(`Timeout after ${n}ms`))},n)),i.signal.addEventListener("abort",()=>{clearTimeout(r),o(new E("Operation aborted"))},{once:!0});let s={timeout:n,abort:i.signal};yield e((...e)=>{clearTimeout(r),t(...e)},()=>{clearTimeout(r),o()},s)}))}((t,n,i)=>R(this,void 0,void 0,function*(){var o;let r=X(i.signal).signal;if(r.aborted){n(new E("Bridge connection aborted"));return}let s=new URL(F(e.bridgeUrl,e.ssePath));s.searchParams.append("client_id",e.sessionId);let a=yield e.bridgeGatewayStorage.getLastEventId();if(a&&s.searchParams.append("last_event_id",a),r.aborted){n(new E("Bridge connection aborted"));return}let l=new EventSource(s.toString());l.onerror=i=>R(this,void 0,void 0,function*(){if(r.aborted){l.close(),n(new E("Bridge connection aborted"));return}try{let n=yield e.errorHandler(l,i);n!==l&&l.close(),n&&n!==l&&t(n)}catch(e){l.close(),n(e)}}),l.onopen=()=>{if(r.aborted){l.close(),n(new E("Bridge connection aborted"));return}t(l)},l.onmessage=t=>{if(r.aborted){l.close(),n(new E("Bridge connection aborted"));return}e.messageHandler(t)},null===(o=e.signal)||void 0===o||o.addEventListener("abort",()=>{l.close(),n(new E("Bridge connection aborted"))})}),{timeout:e.openingDeadlineMS,signal:e.signal})})}(n)}),e=>R(this,void 0,void 0,function*(){e.close()})),this.bridgeGatewayStorage=new H(e,t)}get isReady(){let e=this.eventSource.current();return(null==e?void 0:e.readyState)===EventSource.OPEN}get isClosed(){let e=this.eventSource.current();return(null==e?void 0:e.readyState)!==EventSource.OPEN}get isConnecting(){let e=this.eventSource.current();return(null==e?void 0:e.readyState)===EventSource.CONNECTING}registerSession(e){return R(this,void 0,void 0,function*(){yield this.eventSource.create(null==e?void 0:e.signal,null==e?void 0:e.openingDeadlineMS)})}send(e,t,n,i){var o;return R(this,void 0,void 0,function*(){let r={};"number"==typeof i?r.ttl=i:(r.ttl=null==i?void 0:i.ttl,r.signal=null==i?void 0:i.signal,r.attempts=null==i?void 0:i.attempts);let s=new URL(F(this.bridgeUrl,this.postPath));s.searchParams.append("client_id",this.sessionId),s.searchParams.append("to",t),s.searchParams.append("ttl",((null==r?void 0:r.ttl)||this.defaultTtl).toString()),s.searchParams.append("topic",n);let a=f(e);yield Q(e=>R(this,void 0,void 0,function*(){let t=yield this.post(s,a,e.signal);if(!t.ok)throw new E(`Bridge send failed, status ${t.status}`)}),{attempts:null!==(o=null==r?void 0:r.attempts)&&void 0!==o?o:Number.MAX_SAFE_INTEGER,delayMs:this.defaultResendDelay,signal:null==r?void 0:r.signal})})}pause(){this.eventSource.dispose().catch(e=>Y(`Bridge pause failed, ${e}`))}unPause(){return R(this,void 0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return R(this,void 0,void 0,function*(){yield this.eventSource.dispose().catch(e=>Y(`Bridge close failed, ${e}`))})}setListener(e){this.listener=e}setErrorsListener(e){this.errorsListener=e}post(e,t,n){return R(this,void 0,void 0,function*(){let i=yield fetch(e,{method:"post",body:t,signal:n});if(!i.ok)throw new E(`Bridge send failed, status ${i.status}`);return i})}errorsHandler(e,t){return R(this,void 0,void 0,function*(){if(this.isConnecting)throw e.close(),new E("Bridge error, failed to connect");if(this.isReady){try{this.errorsListener(t)}catch(e){}return}if(this.isClosed)return e.close(),Z(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new E("Bridge error, unknown state")})}messagesHandler(e){return R(this,void 0,void 0,function*(){let t;if(e.data!==this.heartbeatMessage&&(yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId),!this.isClosed)){try{t=JSON.parse(e.data)}catch(e){throw new E(`Bridge message parse failed, message ${e.data}`)}this.listener(t)}})}}function et(e){return!("connectEvent"in e)}class en{constructor(e){this.storage=e,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(e){return R(this,void 0,void 0,function*(){if("injected"===e.type)return this.storage.setItem(this.storeKey,JSON.stringify(e));if(!et(e)){let t={sessionKeyPair:e.session.sessionCrypto.stringifyKeypair(),walletPublicKey:e.session.walletPublicKey,bridgeUrl:e.session.bridgeUrl},n={type:"http",connectEvent:e.connectEvent,session:t,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(n))}let t={type:"http",connectionSource:e.connectionSource,sessionCrypto:e.sessionCrypto.stringifyKeypair()};return this.storage.setItem(this.storeKey,JSON.stringify(t))})}removeConnection(){return R(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return R(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);if(!e)return null;let t=JSON.parse(e);if("injected"===t.type)return t;if("connectEvent"in t){let e=new S(t.session.sessionKeyPair);return{type:"http",connectEvent:t.connectEvent,lastWalletEventId:t.lastWalletEventId,nextRpcRequestId:t.nextRpcRequestId,session:{sessionCrypto:e,bridgeUrl:t.session.bridgeUrl,walletPublicKey:t.session.walletPublicKey}}}return{type:"http",sessionCrypto:new S(t.sessionCrypto),connectionSource:t.connectionSource}})}getHttpConnection(){return R(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new E("Trying to read HTTP connection source while nothing is stored");if("injected"===e.type)throw new E("Trying to read HTTP connection source while injected connection is stored");return e})}getHttpPendingConnection(){return R(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new E("Trying to read HTTP connection source while nothing is stored");if("injected"===e.type)throw new E("Trying to read HTTP connection source while injected connection is stored");if(!et(e))throw new E("Trying to read HTTP-pending connection while http connection is stored");return e})}getInjectedConnection(){return R(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new E("Trying to read Injected bridge connection source while nothing is stored");if((null==e?void 0:e.type)==="http")throw new E("Trying to read Injected bridge connection source while HTTP connection is stored");return e})}storedConnectionType(){return R(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);return e?JSON.parse(e).type:null})}storeLastWalletEventId(e){return R(this,void 0,void 0,function*(){let t=yield this.getConnection();if(t&&"http"===t.type&&!et(t))return t.lastWalletEventId=e,this.storeConnection(t)})}getLastWalletEventId(){return R(this,void 0,void 0,function*(){let e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId})}increaseNextRpcRequestId(){return R(this,void 0,void 0,function*(){let e=yield this.getConnection();if(e&&"nextRpcRequestId"in e){let t=e.nextRpcRequestId||0;return e.nextRpcRequestId=t+1,this.storeConnection(e)}})}getNextRpcRequestId(){return R(this,void 0,void 0,function*(){let e=yield this.getConnection();return e&&"nextRpcRequestId"in e&&e.nextRpcRequestId||0})}}class ei{constructor(e,t){this.storage=e,this.walletConnectionSource=t,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=12e3,this.defaultRetryTimeoutMS=2e3,this.connectionStorage=new en(e)}static fromStorage(e){return R(this,void 0,void 0,function*(){let t=new en(e),n=yield t.getHttpConnection();return et(n)?new ei(e,n.connectionSource):new ei(e,{bridgeUrl:n.session.bridgeUrl})})}connect(e,t){var n;let i=X(null==t?void 0:t.signal);null===(n=this.abortController)||void 0===n||n.abort(),this.abortController=i,this.closeGateways();let o=new S;this.session={sessionCrypto:o,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:o}).then(()=>R(this,void 0,void 0,function*(){i.signal.aborted||(yield Q(e=>{var n;return this.openGateways(o,{openingDeadlineMS:null!==(n=null==t?void 0:t.openingDeadlineMS)&&void 0!==n?n:this.defaultOpeningDeadlineMS,signal:null==e?void 0:e.signal})},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:i.signal}))}));let r="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(r,e)}restoreConnection(e){var t,n;return R(this,void 0,void 0,function*(){let i=X(null==e?void 0:e.signal);if(null===(t=this.abortController)||void 0===t||t.abort(),this.abortController=i,i.signal.aborted)return;this.closeGateways();let o=yield this.connectionStorage.getHttpConnection();if(!o||i.signal.aborted)return;let r=null!==(n=null==e?void 0:e.openingDeadlineMS)&&void 0!==n?n:this.defaultOpeningDeadlineMS;if(et(o))return this.session={sessionCrypto:o.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(o.sessionCrypto,{openingDeadlineMS:r,signal:null==i?void 0:i.signal});if(Array.isArray(this.walletConnectionSource))throw new E("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=o.session,this.gateway&&(Z("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new ee(this.storage,this.walletConnectionSource.bridgeUrl,o.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),!i.signal.aborted){this.listeners.forEach(e=>e(o.connectEvent));try{yield Q(e=>this.gateway.registerSession({openingDeadlineMS:r,signal:e.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:i.signal})}catch(e){yield this.disconnect({signal:i.signal});return}}})}sendRequest(e,t){let n={};return"function"==typeof t?n.onRequestSent=t:(n.onRequestSent=null==t?void 0:t.onRequestSent,n.signal=null==t?void 0:t.signal,n.attempts=null==t?void 0:t.attempts),new Promise((t,i)=>R(this,void 0,void 0,function*(){var o;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new E("Trying to send bridge request without session");let r=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Z("Send http-bridge request:",Object.assign(Object.assign({},e),{id:r}));let s=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{id:r})),y(this.session.walletPublicKey));try{yield this.gateway.send(s,this.session.walletPublicKey,e.method,{attempts:null==n?void 0:n.attempts,signal:null==n?void 0:n.signal}),null===(o=null==n?void 0:n.onRequestSent)||void 0===o||o.call(n),this.pendingRequests.set(r.toString(),t)}catch(e){i(e)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(e){return R(this,void 0,void 0,function*(){return new Promise(t=>R(this,void 0,void 0,function*(){let n=!1,i=null,o=()=>{n||(n=!0,this.removeBridgeAndSession().then(t))};try{this.closeGateways();let t=X(null==e?void 0:e.signal);i=setTimeout(()=>{t.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:o,signal:t.signal,attempts:1})}catch(e){Z("Disconnect error:",e),n||this.removeBridgeAndSession().then(t)}finally{i&&clearTimeout(i),o()}}))})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}pause(){var e;null===(e=this.gateway)||void 0===e||e.pause(),this.pendingGateways.forEach(e=>e.pause())}unPause(){return R(this,void 0,void 0,function*(){let e=this.pendingGateways.map(e=>e.unPause());this.gateway&&e.push(this.gateway.unPause()),yield Promise.all(e)})}pendingGatewaysListener(e,t,n){return R(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(e)){yield e.close();return}return this.closeGateways({except:e}),this.gateway&&(Z("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=t,this.gateway=e,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(n)})}gatewayListener(e){return R(this,void 0,void 0,function*(){let t=JSON.parse(this.session.sessionCrypto.decrypt(m(e.message).toUint8Array(),y(e.from)));if(Z("Wallet message received:",t),!("event"in t)){let e=t.id.toString(),n=this.pendingRequests.get(e);if(!n){Z(`Response id ${e} doesn't match any request's id`);return}n(t),this.pendingRequests.delete(e);return}if(void 0!==t.id){let e=yield this.connectionStorage.getLastWalletEventId();if(void 0!==e&&t.id<=e){Y(`Received event id (=${t.id}) must be greater than stored last wallet event id (=${e}) `);return}"connect"!==t.event&&(yield this.connectionStorage.storeLastWalletEventId(t.id))}let n=this.listeners;"connect"===t.event&&(yield this.updateSession(t,e.from)),"disconnect"===t.event&&(Z("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),n.forEach(e=>e(t))})}gatewayErrorsListener(e){return R(this,void 0,void 0,function*(){throw new E(`Bridge error ${JSON.stringify(e)}`)})}updateSession(e,t){return R(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:t});let n=e.payload.items.find(e=>"ton_addr"===e.name),i=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{items:[n]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:e.id,connectEvent:i,nextRpcRequestId:0})})}removeBridgeAndSession(){return R(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(e,t){return z(e)?this.generateTGUniversalLink(e,t):this.generateRegularUniversalLink(e,t)}generateRegularUniversalLink(e,t){let n=new URL(e);return n.searchParams.append("v","2"),n.searchParams.append("id",this.session.sessionCrypto.sessionId),n.searchParams.append("r",JSON.stringify(t)),n.toString()}generateTGUniversalLink(e,t){let n="tonconnect-"+V(this.generateRegularUniversalLink("about:blank",t).split("?")[1]),i=new URL(this.convertToDirectLink(e));return i.searchParams.append("startapp",n),i.toString()}convertToDirectLink(e){let t=new URL(e);return t.searchParams.has("attach")&&(t.searchParams.delete("attach"),t.pathname+="/start"),t.toString()}openGateways(e,t){return R(this,void 0,void 0,function*(){if(!Array.isArray(this.walletConnectionSource))return this.gateway&&(Z("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new ee(this.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession({openingDeadlineMS:null==t?void 0:t.openingDeadlineMS,signal:null==t?void 0:t.signal});this.pendingGateways.map(e=>e.close().catch()),this.pendingGateways=this.walletConnectionSource.map(t=>{let n=new ee(this.storage,t.bridgeUrl,e.sessionId,()=>{},()=>{});return n.setListener(e=>this.pendingGatewaysListener(n,t.bridgeUrl,e)),n}),yield Promise.allSettled(this.pendingGateways.map(e=>Q(n=>{var i;return this.pendingGateways.some(t=>t===e)?e.registerSession({openingDeadlineMS:null!==(i=null==t?void 0:t.openingDeadlineMS)&&void 0!==i?i:this.defaultOpeningDeadlineMS,signal:n.signal}):e.close()},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:null==t?void 0:t.signal})))})}closeGateways(e){var t;null===(t=this.gateway)||void 0===t||t.close(),this.pendingGateways.filter(t=>t!==(null==e?void 0:e.except)).forEach(e=>e.close()),this.pendingGateways=[]}}function eo(e,t){return!!e&&"object"==typeof e&&t.every(t=>t in e)}class er{constructor(){this.storage={}}static getInstance(){return er.instance||(er.instance=new er),er.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var t;return null!==(t=this.storage[e])&&void 0!==t?t:null}key(e){var t;let n=Object.keys(this.storage);return e<0||e>=n.length?null:null!==(t=n[e])&&void 0!==t?t:null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t}}function es(){if("undefined"!=typeof window)return window}class ea{constructor(e,t){this.injectedWalletKey=t,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];let n=ea.window;if(!ea.isWindowContainsWallet(n,t))throw new U;this.connectionStorage=new en(e),this.injectedWallet=n[t].tonconnect}static fromStorage(e){return R(this,void 0,void 0,function*(){let t=new en(e);return new ea(e,(yield t.getInjectedConnection()).jsBridgeKey)})}static isWalletInjected(e){return ea.isWindowContainsWallet(this.window,e)}static isInsideWalletBrowser(e){return!!ea.isWindowContainsWallet(this.window,e)&&this.window[e].tonconnect.isWalletBrowser}static getCurrentlyInjectedWallets(){return this.window?(function(){let e=es();if(!e)return[];try{return Object.keys(e)}catch(e){return[]}})().filter(([e,t])=>(function(e){try{var t,n,i;if(t="tonconnect",!eo(e,[t])||(n=e.tonconnect,i="walletInfo",!eo(n,[i])))return!1;return eo(e.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch(e){return!1}})(t)).map(([e,t])=>({name:t.tonconnect.walletInfo.name,appName:t.tonconnect.walletInfo.app_name,aboutUrl:t.tonconnect.walletInfo.about_url,imageUrl:t.tonconnect.walletInfo.image,tondns:t.tonconnect.walletInfo.tondns,jsBridgeKey:e,injected:!0,embedded:t.tonconnect.isWalletBrowser,platforms:t.tonconnect.walletInfo.platforms})):[]}static isWindowContainsWallet(e,t){return!!e&&t in e&&"object"==typeof e[t]&&"tonconnect"in e[t]}connect(e){this._connect(2,e)}restoreConnection(){return R(this,void 0,void 0,function*(){try{Z("Injected Provider restoring connection...");let e=yield this.injectedWallet.restoreConnection();Z("Injected Provider restoring connection response",e),"connect"===e.event?(this.makeSubscriptions(),this.listeners.forEach(t=>t(e))):yield this.connectionStorage.removeConnection()}catch(e){yield this.connectionStorage.removeConnection(),console.error(e)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return R(this,void 0,void 0,function*(){return new Promise(e=>{let t=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(e)};try{this.injectedWallet.disconnect(),t()}catch(e){Z(e),this.sendRequest({method:"disconnect",params:[]},t)}})})}closeAllListeners(){var e;this.listenSubscriptions=!1,this.listeners=[],null===(e=this.unsubscribeCallback)||void 0===e||e.call(this)}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}sendRequest(e,t){var n;return R(this,void 0,void 0,function*(){let i={};"function"==typeof t?i.onRequestSent=t:(i.onRequestSent=null==t?void 0:t.onRequestSent,i.signal=null==t?void 0:t.signal);let o=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),Z("Send injected-bridge request:",Object.assign(Object.assign({},e),{id:o}));let r=this.injectedWallet.send(Object.assign(Object.assign({},e),{id:o}));return r.then(e=>Z("Wallet message received:",e)),null===(n=null==i?void 0:i.onRequestSent)||void 0===n||n.call(i),r})}_connect(e,t){return R(this,void 0,void 0,function*(){try{Z(`Injected Provider connect request: protocolVersion: ${e}, message:`,t);let n=yield this.injectedWallet.connect(e,t);Z("Injected Provider connect response:",n),"connect"===n.event&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(e=>e(n))}catch(t){Z("Injected Provider connect error:",t);let e={event:"connect_error",payload:{code:0,message:null==t?void 0:t.toString()}};this.listeners.forEach(t=>t(e))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(e=>{Z("Wallet message received:",e),this.listenSubscriptions&&this.listeners.forEach(t=>t(e)),"disconnect"===e.event&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}ea.window=es();class el{constructor(){this.localStorage=function(){if(function(){try{return"undefined"!=typeof localStorage}catch(e){return!1}}())return localStorage;if(void 0!==_&&null!=_.versions&&null!=_.versions.node)throw new E("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return er.getInstance()}()}getItem(e){return R(this,void 0,void 0,function*(){return this.localStorage.getItem(e)})}removeItem(e){return R(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}setItem(e,t){return R(this,void 0,void 0,function*(){this.localStorage.setItem(e,t)})}}function ec(e){return"jsBridgeKey"in e&&e.injected}function ed(e){return ec(e)&&e.embedded}function eu(e){return"bridgeUrl"in e}let eh=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://walletbot.me/tonconnect-bridge/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://static.mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"]},{app_name:"bitgetTonWallet",name:"Bitget Wallet",image:"https://raw.githubusercontent.com/bitgetwallet/download/refs/heads/main/logo/png/bitget_wallet_logo_288_mini.png",about_url:"https://web3.bitget.com",deepLink:"bitkeep://",bridge:[{type:"js",key:"bitgetTonWallet"},{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","chrome"],universal_url:"https://bkcode.vip/ton-connect"},{app_name:"okxMiniWallet",name:"OKX Mini Wallet",image:"https://static.okx.com/cdn/assets/imgs/2411/8BE1A4A434D8F58A.png",about_url:"https://www.okx.com/web3",universal_url:"https://t.me/OKX_WALLET_BOT?attach=wallet",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"binanceWeb3TonWallet",name:"Binance Web3 Wallet",image:"https://public.bnbstatic.com/static/binance-w3w/ton-provider/binancew3w.png",about_url:"https://www.binance.com/en/web3wallet",deepLink:"bnc://app.binance.com/cedefi/ton-connect",bridge:[{type:"js",key:"binancew3w"},{type:"sse",url:"https://wallet.binance.com/tonbridge/bridge"}],platforms:["ios","android","macos","windows","linux"],universal_url:"https://app.binance.com/cedefi/ton-connect"},{app_name:"fintopio-tg",name:"Fintopio",image:"https://fintopio.com/tonconnect-icon.png",about_url:"https://fintopio.com",universal_url:"https://t.me/fintopio?attach=wallet",bridge:[{type:"sse",url:"https://wallet-bridge.fintopio.com/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]},{app_name:"hot",name:"HOT",image:"https://raw.githubusercontent.com/hot-dao/media/main/logo.png",about_url:"https://hot-labs.org/",universal_url:"https://t.me/herewalletbot?attach=wallet",bridge:[{type:"sse",url:"https://sse-bridge.hot-labs.org"},{type:"js",key:"hotWallet"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"bybitTonWallet",name:"Bybit Wallet",image:"https://raw.githubusercontent.com/bybit-web3/bybit-web3.github.io/main/docs/images/bybit-logo.png",about_url:"https://www.bybit.com/web3",universal_url:"https://app.bybit.com/ton-connect",deepLink:"bybitapp://",bridge:[{type:"js",key:"bybitTonWallet"},{type:"sse",url:"https://api-node.bybit.com/spot/api/web3/bridge/ton/bridge"}],platforms:["ios","android","chrome"]},{app_name:"dewallet",name:"DeWallet",image:"https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",about_url:"https://delabwallet.com",universal_url:"https://t.me/dewallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.dewallet.pro/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"safepalwallet",name:"SafePal",image:"https://s.pvcliping.com/web/public_image/SafePal_x288.png",tondns:"",about_url:"https://www.safepal.com",universal_url:"https://link.safepal.io/ton-connect",deepLink:"safepal-tc://",bridge:[{type:"sse",url:"https://ton-bridge.safepal.com/tonbridge/v1/bridge"},{type:"js",key:"safepalwallet"}],platforms:["ios","android","chrome","firefox"]},{app_name:"GateWallet",name:"GateWallet",image:"https://img.gatedataimg.com/prd-ordinal-imgs/036f07bb8730716e/gateio-0925.png",about_url:"https://www.gate.io/",bridge:[{type:"js",key:"gatetonwallet"},{type:"sse",url:"https://dapp.gateio.services/tonbridge_api/bridge/v1"}],platforms:["ios","android"],universal_url:"https://gateio.go.link/gateio/web3?adj_t=1ff8khdw_1fu4ccc7"},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"]},{app_name:"BitgetWeb3",name:"BitgetWeb3",image:"https://img.bitgetimg.com/image/third/1731638059795.png",about_url:"​https://www.bitget.com",universal_url:"https://t.me/BitgetOfficialBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","windows","macos","linux"]},{app_name:"tobi",name:"Tobi",image:"https://app.tobiwallet.app/icons/logo-288.png",about_url:"https://tobi.fun",universal_url:"https://t.me/TobiCopilotBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-bridge.tobiwallet.app/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"]}];class ep{constructor(e){this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource="https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json",(null==e?void 0:e.walletsListSource)&&(this.walletsListSource=e.walletsListSource),(null==e?void 0:e.cacheTTLMs)&&(this.cacheTTLMs=e.cacheTTLMs)}getWallets(){return R(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return R(this,void 0,void 0,function*(){let e=(yield this.getWallets()).filter(ed);return 1!==e.length?null:e[0]})}fetchWalletsList(){return R(this,void 0,void 0,function*(){let e=[];try{let t=yield fetch(this.walletsListSource);if(e=yield t.json(),!Array.isArray(e))throw new A("Wrong wallets list format, wallets list must be an array.");let n=e.filter(e=>!this.isCorrectWalletConfigDTO(e));n.length&&(Y(`Wallet(s) ${n.map(e=>e.name).join(", ")} config format is wrong. They were removed from the wallets list.`),e=e.filter(e=>this.isCorrectWalletConfigDTO(e)))}catch(t){Y(t),e=eh}let t=[];try{t=ea.getCurrentlyInjectedWallets()}catch(e){Y(e)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(e),t)})}walletConfigDTOListToWalletConfigList(e){return e.map(e=>{let t={name:e.name,appName:e.app_name,imageUrl:e.image,aboutUrl:e.about_url,tondns:e.tondns,platforms:e.platforms};return e.bridge.forEach(n=>{if("sse"===n.type&&(t.bridgeUrl=n.url,t.universalLink=e.universal_url,t.deepLink=e.deepLink),"js"===n.type){let e=n.key;t.jsBridgeKey=e,t.injected=ea.isWalletInjected(e),t.embedded=ea.isInsideWalletBrowser(e)}}),t})}mergeWalletsLists(e,t){return[...new Set(e.concat(t).map(e=>e.name)).values()].map(n=>{let i=e.find(e=>e.name===n),o=t.find(e=>e.name===n);return Object.assign(Object.assign({},i&&Object.assign({},i)),o&&Object.assign({},o))})}isCorrectWalletConfigDTO(e){if(!e||"object"!=typeof e||!("name"in e)||!("image"in e)||!("about_url"in e)||!("platforms"in e)||!("app_name"in e)||!e.platforms||!Array.isArray(e.platforms)||!e.platforms.length||!("bridge"in e)||!Array.isArray(e.bridge)||!e.bridge.length)return!1;let t=e.bridge;if(t.some(e=>!e||"object"!=typeof e||!("type"in e)))return!1;let n=t.find(e=>"sse"===e.type);if(n&&(!("url"in n)||!n.url||!e.universal_url))return!1;let i=t.find(e=>"js"===e.type);return!i||"key"in i&&!!i.key}}class eg extends E{get info(){return"Wallet doesn't support requested feature method."}constructor(...e){super(...e),Object.setPrototypeOf(this,eg.prototype)}}function ew(){return{type:"request-version"}}function eb(e){return{type:"response-version",version:e}}function ef(e){return{ton_connect_sdk_lib:e.ton_connect_sdk_lib,ton_connect_ui_lib:e.ton_connect_ui_lib}}function em(e,t){var n,i,o,r,s,a,l,c;let d=(null===(n=null==t?void 0:t.connectItems)||void 0===n?void 0:n.tonProof)&&"proof"in t.connectItems.tonProof;return{wallet_address:null!==(o=null===(i=null==t?void 0:t.account)||void 0===i?void 0:i.address)&&void 0!==o?o:null,wallet_type:null!==(r=null==t?void 0:t.device.appName)&&void 0!==r?r:null,wallet_version:null!==(s=null==t?void 0:t.device.appVersion)&&void 0!==s?s:null,auth_type:d?"ton_proof":"ton_addr",custom_data:Object.assign({chain_id:null!==(l=null===(a=null==t?void 0:t.account)||void 0===a?void 0:a.chain)&&void 0!==l?l:null,provider:null!==(c=null==t?void 0:t.provider)&&void 0!==c?c:null},ef(e))}}function ev(e){return{type:"connection-started",custom_data:ef(e)}}function ey(e,t){return Object.assign({type:"connection-completed",is_success:!0},em(e,t))}function eS(e,t,n){return{type:"connection-error",is_success:!1,error_message:t,error_code:null!=n?n:null,custom_data:ef(e)}}function e_(e){return{type:"connection-restoring-started",custom_data:ef(e)}}function eR(e,t){return Object.assign({type:"connection-restoring-completed",is_success:!0},em(e,t))}function eE(e,t){return{type:"connection-restoring-error",is_success:!1,error_message:t,custom_data:ef(e)}}function eO(e,t){var n,i,o,r;return{valid_until:null!==(n=String(t.validUntil))&&void 0!==n?n:null,from:null!==(r=null!==(i=t.from)&&void 0!==i?i:null===(o=null==e?void 0:e.account)||void 0===o?void 0:o.address)&&void 0!==r?r:null,messages:t.messages.map(e=>{var t,n;return{address:null!==(t=e.address)&&void 0!==t?t:null,amount:null!==(n=e.amount)&&void 0!==n?n:null}})}}function ek(e,t,n){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},em(e,t)),eO(t,n))}function eC(e,t,n,i){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:i.boc},em(e,t)),eO(t,n))}function eT(e,t,n,i,o){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:i,error_code:null!=o?o:null},em(e,t)),eO(t,n))}function ex(e,t,n){return Object.assign({type:"disconnection",scope:n},em(e,t))}class eN{constructor(){this.window=es()}dispatchEvent(e,t){var n;return R(this,void 0,void 0,function*(){let i=new CustomEvent(e,{detail:t});null===(n=this.window)||void 0===n||n.dispatchEvent(i)})}addEventListener(e,t,n){var i;return R(this,void 0,void 0,function*(){return null===(i=this.window)||void 0===i||i.addEventListener(e,t,n),()=>{var n;return null===(n=this.window)||void 0===n?void 0:n.removeEventListener(e,t)}})}}class eP{constructor(e){var t;this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=null!==(t=null==e?void 0:e.eventDispatcher)&&void 0!==t?t:new eN,this.tonConnectSdkVersion=e.tonConnectSdkVersion,this.init().catch()}get version(){return ef({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return R(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch(e){}})}setRequestVersionHandler(){return R(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>R(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",eb(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return R(this,void 0,void 0,function*(){return new Promise((e,t)=>R(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",t=>{e(t.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",ew())}catch(e){t(e)}}))})}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch(e){}}trackConnectionStarted(...e){try{let t=ev(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionCompleted(...e){try{let t=ey(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionError(...e){try{let t=eS(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringStarted(...e){try{let t=e_(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringCompleted(...e){try{let t=eR(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringError(...e){try{let t=eE(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackDisconnection(...e){try{let t=ex(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSentForSignature(...e){try{let t=ek(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSigned(...e){try{let t=eC(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSigningFailed(...e){try{let t=eT(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}}class ej{constructor(e){if(this.walletsList=new ep,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(null==e?void 0:e.manifestUrl)||function(){var e;let t=null===(e=es())||void 0===e?void 0:e.location.origin;return t?t+"/tonconnect-manifest.json":""}(),storage:(null==e?void 0:e.storage)||new el},this.walletsList=new ep({walletsListSource:null==e?void 0:e.walletsListSource,cacheTTLMs:null==e?void 0:e.walletsListCacheTTLMs}),this.tracker=new eP({eventDispatcher:null==e?void 0:e.eventDispatcher,tonConnectSdkVersion:"3.0.6"}),!this.dappSettings.manifestUrl)throw new O("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new en(this.dappSettings.storage),(null==e?void 0:e.disableAutoPauseConnection)||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return null!==this._wallet}get account(){var e;return(null===(e=this._wallet)||void 0===e?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(e=>e(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(t=>t!==e),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(e=>e!==t))}}connect(e,t){var n,i;let o={};if("object"==typeof t&&"tonProof"in t&&(o.request=t),"object"==typeof t&&("openingDeadlineMS"in t||"signal"in t||"request"in t)&&(o.request=null==t?void 0:t.request,o.openingDeadlineMS=null==t?void 0:t.openingDeadlineMS,o.signal=null==t?void 0:t.signal),this.connected)throw new T;let r=X(null==o?void 0:o.signal);if(null===(n=this.abortController)||void 0===n||n.abort(),this.abortController=r,r.signal.aborted)throw new E("Connection was aborted");return null===(i=this.provider)||void 0===i||i.closeConnection(),this.provider=this.createProvider(e),r.signal.addEventListener("abort",()=>{var e;null===(e=this.provider)||void 0===e||e.closeConnection(),this.provider=null}),this.tracker.trackConnectionStarted(),this.provider.connect(this.createConnectRequest(null==o?void 0:o.request),{openingDeadlineMS:null==o?void 0:o.openingDeadlineMS,signal:r.signal})}restoreConnection(e){var t,n;return R(this,void 0,void 0,function*(){this.tracker.trackConnectionRestoringStarted();let i=X(null==e?void 0:e.signal);if(null===(t=this.abortController)||void 0===t||t.abort(),this.abortController=i,i.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let[o,r]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(i.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let s=null;try{switch(o){case"http":s=yield ei.fromStorage(this.dappSettings.storage);break;case"injected":s=yield ea.fromStorage(this.dappSettings.storage);break;default:if(!r)return;s=this.createProvider(r)}}catch(e){this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),null==s||s.closeConnection(),s=null;return}if(i.signal.aborted){null==s||s.closeConnection(),this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}if(!s){Y("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}null===(n=this.provider)||void 0===n||n.closeConnection(),this.provider=s,s.listen(this.walletEventsListener.bind(this));let a=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted"),null==s||s.closeConnection(),s=null};return i.signal.addEventListener("abort",a),Promise.race([Q(t=>R(this,void 0,void 0,function*(){yield null==s?void 0:s.restoreConnection({openingDeadlineMS:null==e?void 0:e.openingDeadlineMS,signal:t.signal}),i.signal.removeEventListener("abort",a),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:2e3,signal:null==e?void 0:e.signal}),new Promise(e=>setTimeout(()=>e(),12e3))])})}sendTransaction(e,t){return R(this,void 0,void 0,function*(){let n={};"function"==typeof t?n.onRequestSent=t:(n.onRequestSent=null==t?void 0:t.onRequestSent,n.signal=null==t?void 0:t.signal);let i=X(null==n?void 0:n.signal);if(i.signal.aborted)throw new E("Transaction sending was aborted");this.checkConnection(),function(e,t){let n=e.includes("SendTransaction"),i=e.find(e=>e&&"object"==typeof e&&"SendTransaction"===e.name);if(!n&&!i)throw new eg("Wallet doesn't support SendTransaction feature.");if(i&&void 0!==i.maxMessages){if(i.maxMessages<t.requiredMessagesNumber)throw new eg(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${i.maxMessages}, but ${t.requiredMessagesNumber} is required.`);return}!function(...e){try{console.warn("[TON_CONNECT_SDK]",...e)}catch(e){}}("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}(this.wallet.device.features,{requiredMessagesNumber:e.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,e);let{validUntil:o}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>t.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}(e,["validUntil"]),s=e.from||this.account.address,a=e.network||this.account.chain,l=yield this.provider.sendRequest($.convertToRpcRequest(Object.assign(Object.assign({},r),{valid_until:o,from:s,network:a})),{onRequestSent:n.onRequestSent,signal:i.signal});if($.isError(l))return this.tracker.trackTransactionSigningFailed(this.wallet,e,l.error.message,l.error.code),$.parseAndThrowError(l);let c=$.convertFromRpcResponse(l);return this.tracker.trackTransactionSigned(this.wallet,e,c),c})}disconnect(e){var t;return R(this,void 0,void 0,function*(){if(!this.connected)throw new x;let n=X(null==e?void 0:e.signal),i=this.abortController;if(this.abortController=n,n.signal.aborted)throw new E("Disconnect was aborted");this.onWalletDisconnected("dapp"),yield null===(t=this.provider)||void 0===t?void 0:t.disconnect({signal:n.signal}),null==i||i.abort()})}pauseConnection(){var e;(null===(e=this.provider)||void 0===e?void 0:e.type)==="http"&&this.provider.pause()}unPauseConnection(){var e;return(null===(e=this.provider)||void 0===e?void 0:e.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){let e=function(){if("undefined"!=typeof document)return document}();if(e)try{e.addEventListener("visibilitychange",()=>{e.hidden?this.pauseConnection():this.unPauseConnection().catch()})}catch(e){Y("Cannot subscribe to the document.visibilitychange: ",e)}}createProvider(e){let t;return(t=!Array.isArray(e)&&"jsBridgeKey"in e?new ea(this.dappSettings.storage,e.jsBridgeKey):new ei(this.dappSettings.storage,e)).listen(this.walletEventsListener.bind(this)),t}walletEventsListener(e){switch(e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.onWalletConnectError(e.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){let t=e.items.find(e=>"ton_addr"===e.name),n=e.items.find(e=>"ton_proof"===e.name);if(!t)throw new E("ton_addr connection item was not found");let i={device:e.device,provider:this.provider.type,account:{address:t.address,chain:t.network,walletStateInit:t.walletStateInit,publicKey:t.publicKey}};n&&(i.connectItems={tonProof:n}),this.wallet=i,this.tracker.trackConnectionCompleted(i)}onWalletConnectError(e){let t=q.parseError(e);if(this.statusChangeErrorSubscriptions.forEach(e=>e(t)),Z(t),this.tracker.trackConnectionError(e.message,e.code),t instanceof C||t instanceof k)throw Y(t),t}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}checkConnection(){if(!this.connected)throw new x}createConnectRequest(e){let t=[{name:"ton_addr"}];return(null==e?void 0:e.tonProof)&&t.push({name:"ton_proof",payload:e.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:t}}}function eU(e,t=!1){let{wc:n,hex:i}=function(e){if(!e.includes(":"))throw new W(`Wrong address ${e}. Address must include ":".`);let t=e.split(":");if(2!==t.length)throw new W(`Wrong address ${e}. Address must include ":" only once.`);let n=parseInt(t[0]);if(0!==n&&-1!==n)throw new W(`Wrong address ${e}. WC must be eq 0 or -1, but ${n} received.`);let i=t[1];if((null==i?void 0:i.length)!==64)throw new W(`Wrong address ${e}. Hex part must be 64bytes length, but ${null==i?void 0:i.length} received.`);return{wc:n,hex:function(e){let t=(e=e.toLowerCase()).length;if(t%2!=0)throw new L("Hex string must have length a multiple of 2: "+e);let n=t/2,i=new Uint8Array(n);for(let t=0;t<n;t++){let n=2*t,o=e.substring(n,n+2);if(!eA.hasOwnProperty(o))throw new L("Invalid hex character: "+o);i[t]=eA[o]}return i}(i)}}(e),o=81;t&&(o|=128);let r=new Int8Array(34);r[0]=o,r[1]=n,r.set(i,2);let s=new Uint8Array(36);return s.set(r),s.set(function(e){let t=0,n=new Uint8Array(e.length+2);for(let i of(n.set(e),n)){let e=128;for(;e>0;)t<<=1,i&e&&(t+=1),e>>=1,t>65535&&(t&=65535,t^=4129)}return new Uint8Array([Math.floor(t/256),t%256])}(r),34),f(s).replace(/\+/g,"-").replace(/\//g,"_")}ej.walletsList=new ep,ej.isWalletInjected=e=>ea.isWalletInjected(e),ej.isInsideWalletBrowser=e=>ea.isInsideWalletBrowser(e);let eA={};for(let e=0;e<=255;e++){let t=e.toString(16);t.length<2&&(t="0"+t),eA[t]=e}}}]);